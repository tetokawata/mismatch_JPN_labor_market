[["index.html", "ハローワークデータからみる労働市場 Chapter 1 要約", " ハローワークデータからみる労働市場 川田恵介 2021-08-26 Chapter 1 要約 公的職業紹介業務（ハローワーク）を通じて収集された業務データ（職業安定業務統計）を用いて、日本の求人・求職の状況を概観する。 同データは月次統計であり、現時点では2021年6月まで公開されている。 基本的な記述統計量に加え、Kawata and Sato (2021) を応用した厚生評価も行う。 References "],["記述統計量.html", "Chapter 2 記述統計量 2.1 方法 2.2 Rコード 2.3 結果 2.4 環境", " Chapter 2 記述統計量 1963年から2021年6月までの月次データを用いて、厚生変化を記述する 2.1 方法 ４半期ごとに集計する 季節性を除去するために、前年同月からの変化率を報告 \\[\\frac{Y_{year,quaterly}-Y_{year-1,quaterly}}{Y_{year-1,quaterly}}\\] 2.2 Rコード pacman::p_load(&quot;tidyverse&quot;, &quot;readxl&quot;, &quot;lubridate&quot;) col.label &lt;- c(&quot;year&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;, &quot;type&quot;, &quot;group&quot;) select.raw &lt;- 14:63 select.column &lt;- c(1,3:14) raw.vacancy.full &lt;- read_excel(&quot;data/第6表.xlsx&quot;, sheet = &quot;第６表ー２（パート除く）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;求人&quot;, group = &quot;フルタイム&quot;) colnames(raw.vacancy.full) &lt;- col.label raw.seeker.full &lt;- read_excel(&quot;data/第7表.xlsx&quot;, sheet = &quot;第７表ー２（パート除く）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;求職&quot;, group = &quot;フルタイム&quot;) colnames(raw.seeker.full) &lt;- col.label raw.hir.full &lt;- read_excel(&quot;data/第8表.xlsx&quot;, sheet = &quot;第８表ー２（パート除く）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;新規就職&quot;, group = &quot;フルタイム&quot;) colnames(raw.hir.full) &lt;- col.label raw.vacancy.part &lt;- read_excel(&quot;data/第6表.xlsx&quot;, sheet = &quot;第６表ー３（パート）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;求人&quot;, group = &quot;パートタイム&quot;) colnames(raw.vacancy.part) &lt;- col.label raw.seeker.part &lt;- read_excel(&quot;data/第7表.xlsx&quot;, sheet = &quot;第７表ー３（パート）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;求職&quot;, group = &quot;パートタイム&quot;) colnames(raw.seeker.part) &lt;- col.label raw.hir.part &lt;- read_excel(&quot;data/第8表.xlsx&quot;, sheet = &quot;第８表ー３（パート）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;新規就職&quot;, group = &quot;パートタイム&quot;) colnames(raw.hir.part) &lt;- col.label df &lt;- rbind(raw.hir.full, raw.hir.part, raw.vacancy.full, raw.vacancy.part, raw.seeker.full, raw.seeker.part ) |&gt; pivot_longer(cols = 2:13, names_to = &quot;month&quot;, values_to = &quot;n&quot;) |&gt; mutate(n = n |&gt; as.numeric(), year = year |&gt; str_sub(1,4) |&gt; as.numeric(), month = month |&gt; as.numeric(), quaterly = month |&gt; cut(c(0,3,6,9,12), labels = c(1,2,3,4)), date = yq(str_c(year,quaterly,sep = &quot;:Q&quot;)) ) |&gt; group_by(date,type) |&gt; mutate(n = n |&gt; sum()) |&gt; ungroup() |&gt; distinct(year,quaterly,date,type,n) |&gt; spread(key = type, value = n) |&gt; group_by(quaterly) |&gt; mutate(求人 = (求人- lag(求人))/lag(求人), 求職 = (求職 - lag(求職))/lag(求職), 新規就職 = (新規就職 - lag(新規就職))/lag(新規就職) ) |&gt; ungroup() |&gt; pivot_longer(cols = c(4:6), names_to = &quot;type&quot;, values_to = &quot;N&quot;) |&gt; na.omit() fig &lt;- df |&gt; ggplot(aes(x = date, y = N) ) + geom_line() + geom_hline(yintercept = 0) + facet_wrap(~type, ncol = 1) + ylab(&quot;&quot;) + xlab(&quot;&quot;) + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) 2.3 結果 求人と景気の正循環、求職と景気の反循環を再確認できる オイルショックやバブル崩壊、リーマンショック後の不況期において、求人の低下、求職の増加が認められる COVID-19の影響を反映していると考えられる2020年第2・3四半期の求人急落および第3四半期以降の求職増加はオイルショックやリーマンショックほどではないが、90年代のバブル崩壊後落ち込みを超える水準であった。 顕著な特徴は、2020年第2四半期の新規就職件数急落が、他の経済ショック期と比べても大きい点である。 求人・求職の変化と比べても大きく、COVID-19が採用・入職の手控えを強力に促進した可能性が高い。 2.4 環境 sessionInfo() ## R version 4.1.1 (2021-08-10) ## Platform: aarch64-apple-darwin20 (64-bit) ## Running under: macOS Big Sur 11.2.2 ## ## Matrix products: default ## BLAS: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRblas.0.dylib ## LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib ## ## locale: ## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 ## ## attached base packages: ## [1] stats graphics grDevices utils datasets methods base ## ## other attached packages: ## [1] lubridate_1.7.10 readxl_1.3.1 forcats_0.5.1 stringr_1.4.0 ## [5] dplyr_1.0.7 purrr_0.3.4 readr_2.0.1 tidyr_1.1.3 ## [9] tibble_3.1.3 ggplot2_3.3.5 tidyverse_1.3.1 ## ## loaded via a namespace (and not attached): ## [1] tidyselect_1.1.1 xfun_0.25 haven_2.4.3 colorspace_2.0-2 ## [5] vctrs_0.3.8 generics_0.1.0 htmltools_0.5.1.1 yaml_2.2.1 ## [9] utf8_1.2.2 rlang_0.4.11 jquerylib_0.1.4 pillar_1.6.2 ## [13] withr_2.4.2 glue_1.4.2 DBI_1.1.1 dbplyr_2.1.1 ## [17] modelr_0.1.8 lifecycle_1.0.0 munsell_0.5.0 gtable_0.3.0 ## [21] cellranger_1.1.0 rvest_1.0.1 evaluate_0.14 labeling_0.4.2 ## [25] knitr_1.33 tzdb_0.1.2 fansi_0.5.0 highr_0.9 ## [29] broom_0.7.9 Rcpp_1.0.7 backports_1.2.1 scales_1.1.1 ## [33] jsonlite_1.7.2 farver_2.1.0 fs_1.5.0 hms_1.1.0 ## [37] digest_0.6.27 stringi_1.7.3 bookdown_0.23 grid_4.1.1 ## [41] cli_3.0.1 tools_4.1.1 magrittr_2.0.1 pacman_0.5.1 ## [45] crayon_1.4.1 pkgconfig_2.0.3 ellipsis_0.3.2 xml2_1.3.2 ## [49] reprex_2.0.1 assertthat_0.2.1 rmarkdown_2.10 httr_1.4.2 ## [53] rstudioapi_0.13 R6_2.5.1 compiler_4.1.1 "],["厚生分析時系列比較.html", "Chapter 3 厚生分析:時系列比較 3.1 方法 3.2 Rコード 3.3 結果 3.4 環境", " Chapter 3 厚生分析:時系列比較 1963年から2021年6月までの年次データ、Kawata and Sato (2021) の手法を用いて、求職者の厚生変化を記述する 引き続き四半期ごとに集計する 3.1 方法 同質な求職者・求人からなるモデルを用いて、定常状態における厚生変化の識別方法を紹介する。 Kawata and Sato (2021) では異質性を導入し・非定常状態であったとしても、同じ結果を得れることを示している。 標準的なDiamond-Mortencen-Pissarides型サーチモデル(Rogerson, Shimer, and Wright 2005)に準じて、以下の4条件式を仮定する 失業者の価値関数は以下で定義される。 \\[rU=b+\\underbrace{\\Delta}_{サーチ活動の余剰}\\] ただし \\[\\Delta = \\underbrace{\\frac{m}{u}}_{入職率}\\times \\underbrace{(W-U)}_{入職からの余剰}\\] \\(m:\\) 新規就職件数、\\(u:\\)求職者数、\\(U:\\)求職者の期待効用、\\(W:\\)就業者の期待効用、\\(r,b:\\) パラメータ サーチ活動の余剰をデータから識別することを目指す。 同値はサーチ活動がもたらす期待余剰であり、入職率と入職がもたらす余剰\\(W-U\\)の積として定義される。 識別の障害となるのは、入職からの余剰をデータから直接観察できない点にある。以下では他の均衡条件を用いることで、この観察できない値の”変化”は復元できることを示している。 求人の価値関数は以下で定義される。 \\[rV=-k+\\frac{m}{v}\\times (J-V)\\] \\(v:\\) 求人数、\\(m/v:\\) 求人の充足率、\\(J:\\) 充足求人の期待利潤、\\(V:\\) 未充足求人の期待利潤、\\(k:\\) パラメータ 自由参入条件は以下で定義される。 \\[V=0\\] この条件は、未充足求人の期待利潤が0になるまで、新規求人が登録されることを仮定している。 ナッシュ交渉 \\[(1-\\beta)(W-U)=\\beta(J-V)\\] \\(\\beta:\\) パラメータ この条件は、マッチングによる余剰が、労働者と企業間でパラメータ\\(\\beta\\)の割合で分配されることを仮定している。同パラメータをデータから推定することは困難であるが、以下の議論は、入職からの期待余剰\\(\\Delta\\)の”変化”の識別は、\\(\\beta\\)の識別を要求しないことを示している。 3.1.1 識別 ナッシュ交渉より、入職からの余剰は以下のように書き換えられる。 \\[\\Delta = \\underbrace{\\frac{m}{u}}_{入職率}\\times \\underbrace{(W-U)}_{入職からの余剰}=\\underbrace{\\frac{m}{u}}_{入職率}\\times \\underbrace{\\frac{\\beta}{1-\\beta}(J-V)}_{入職からの余剰}\\] 自由参入条件からさらに書き換えられる \\[\\Delta = \\underbrace{\\frac{m}{u}}_{入職率}\\times \\underbrace{(W-U)}_{入職からの余剰}=\\underbrace{\\frac{m}{u}}_{入職率}\\times \\underbrace{\\frac{\\beta}{1-\\beta}k\\times\\frac{v}{m}}_{入職からの余剰}\\] 同式からは、新規就職、求人、求職件数とパラメータの積により、新規就職からの余剰は書き下せる ことを示している。 未知のパラメータ(\\(\\beta\\),\\(k\\))を含んでいるため\\(\\Delta\\)そのものをデータから識別することはできない。 他方変化率は、未知のパラメータを推定せずに、識別できる。 異なる状態（2019年 VS 2020年, “With COVID-19” VS “Without COVID-19”等）におけるサーチ活動からの余剰を\\(\\Delta,\\Delta&#39;\\)で記す。 状態が異なっても\\(¥beta\\),\\(k\\)は変化しないとすると、サーチ活動からの余剰の変化率は \\[\\frac{\\Delta - \\Delta&#39;}{\\Delta&#39;}=\\frac{\\frac{m}{u}(W-U)-\\frac{m&#39;}{u&#39;}(W&#39;-U&#39;)}{\\frac{m&#39;}{u&#39;}(W&#39;-U&#39;)}\\] \\[=\\frac{1}{\\frac{m&#39;}{u&#39;}(W&#39;-U&#39;)}[\\underbrace{\\frac{m}{u}(W-U-(W&#39;-U&#39;))}_{マッチからの余剰の貢献}+\\underbrace{(\\frac{m}{u}-\\frac{m&#39;}{u&#39;})(W&#39;-U&#39;)}_{入職率の貢献}]\\] \\[=\\frac{u&#39;}{v&#39;}[\\underbrace{\\frac{m}{u}(\\frac{v}{m}-\\frac{v&#39;}{m&#39;})}_{マッチからの余剰の貢献}+\\underbrace{\\frac{v&#39;}{m&#39;}(\\frac{m}{u}-\\frac{m&#39;}{u&#39;})}_{入職率の貢献}]\\] \\[=\\underbrace{\\frac{u&#39;}{v&#39;}[\\frac{v}{u}-\\frac{v&#39;}{u&#39;}]}_{サーチ活動からの余剰}\\] 同式から総余剰は、求人倍率\\(v/u\\)の変化率により識別されることを示している。 さらにサーチ活動からの総余剰は入職率、入職からの余剰の対数変化に分解でき、それぞれも新規就職・求人・求職件数のみで識別できることを示している。 これらは職業紹介業務統計において継続的に報告されており、公開データのみを用いて、求職活動の厚生評価を行う事ができる。 3.1.2 時系列比較への応用 以下では前年同月と比べたサーチ活動からの余剰変化を推定している。 例えば2020年4月については、\\(\\Delta=\\) 2020年4月の余剰、\\(\\Delta&#39;=\\) 2019年4月の余剰を示す。 同推定値は、前年に比べて求職者が置かれている状況が、どの程度改善ないし悪化しているのかを示す指標となる。 3.2 Rコード pacman::p_load(&quot;tidyverse&quot;, &quot;readxl&quot;, &quot;lubridate&quot;) col.label &lt;- c(&quot;year&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;10&quot;, &quot;11&quot;, &quot;12&quot;, &quot;type&quot;, &quot;group&quot;) select.raw &lt;- 14:63 select.column &lt;- c(1,3:14) raw.vacancy.full &lt;- read_excel(&quot;data/第6表.xlsx&quot;, sheet = &quot;第６表ー２（パート除く）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;求人&quot;, group = &quot;フルタイム&quot;) colnames(raw.vacancy.full) &lt;- col.label raw.seeker.full &lt;- read_excel(&quot;data/第7表.xlsx&quot;, sheet = &quot;第７表ー２（パート除く）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;求職&quot;, group = &quot;フルタイム&quot;) colnames(raw.seeker.full) &lt;- col.label raw.hir.full &lt;- read_excel(&quot;data/第8表.xlsx&quot;, sheet = &quot;第８表ー２（パート除く）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;新規就職&quot;, group = &quot;フルタイム&quot;) colnames(raw.hir.full) &lt;- col.label raw.vacancy.part &lt;- read_excel(&quot;data/第6表.xlsx&quot;, sheet = &quot;第６表ー３（パート）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;求人&quot;, group = &quot;パートタイム&quot;) colnames(raw.vacancy.part) &lt;- col.label raw.seeker.part &lt;- read_excel(&quot;data/第7表.xlsx&quot;, sheet = &quot;第７表ー３（パート）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;求職&quot;, group = &quot;パートタイム&quot;) colnames(raw.seeker.part) &lt;- col.label raw.hir.part &lt;- read_excel(&quot;data/第8表.xlsx&quot;, sheet = &quot;第８表ー３（パート）&quot;) %&gt;% .[select.raw,select.column] |&gt; mutate(type = &quot;新規就職&quot;, group = &quot;パートタイム&quot;) colnames(raw.hir.part) &lt;- col.label df &lt;- rbind(raw.hir.full, raw.hir.part, raw.vacancy.full, raw.vacancy.part, raw.seeker.full, raw.seeker.part ) |&gt; pivot_longer(cols = 2:13, names_to = &quot;month&quot;, values_to = &quot;n&quot;) |&gt; mutate(n = n |&gt; as.numeric(), year = year |&gt; str_sub(1,4) |&gt; as.numeric(), month = month |&gt; as.numeric(), quaterly = month |&gt; cut(c(0,3,6,9,12), labels = c(1,2,3,4)), date = yq(str_c(year,quaterly,sep = &quot;:Q&quot;)) ) |&gt; group_by(date,type) |&gt; mutate(n = n |&gt; sum()) |&gt; ungroup() |&gt; distinct(year,quaterly,date,type,n) |&gt; spread(key = type, value = n) |&gt; group_by(quaterly) |&gt; mutate(サーチ活動からの余剰 = (lag(求職)/lag(求人))*((求人/求職) - (lag(求人)/lag(求職))), 入職率 = (lag(求職)/lag(求人))*(lag(求人)/lag(新規就職))*((新規就職/求職) - (lag(新規就職)/lag(求職))), 入職からの余剰 = (lag(求職)/lag(求人))*(新規就職/求職)*((求人/新規就職) - (lag(求人)/lag(新規就職))) ) |&gt; ungroup() |&gt; select(-求職, -求人, -新規就職) |&gt; pivot_longer(cols = c(4:6), names_to = &quot;type&quot;, values_to = &quot;N&quot;) |&gt; na.omit() fig &lt;- df |&gt; ggplot(aes(x = date, y = N) ) + geom_line() + geom_hline(yintercept = 0) + facet_wrap(~factor(type, levels = c(&quot;入職からの余剰&quot;, &quot;入職率&quot;, &quot;サーチ活動からの余剰&quot;)), ncol = 1) + ylab(&quot;&quot;) + xlab(&quot;&quot;) + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) 3.3 結果 サーチ活動からの余剰、入職率、入職からの余剰は、すべて景気変動と正循環していることが確認できる。 COVID-19がもたらしたサーチ活動からの余剰への影響を他の経済ショックと比べた場合、平成不況と同程度の水準である。 COVID-19の影響は、2020年第2・3四半期については、入職率の低下により生じている。これは、入職からの余剰低下の影響も大きい、他の経済ショックとは大きく異なっている。 入職率への影響は2021年第2四半期期において下げ止まりの傾向を見せているが、入職からの余剰は2020年第2四半期と比べても低下している。 3.4 環境 sessionInfo() ## R version 4.1.1 (2021-08-10) ## Platform: aarch64-apple-darwin20 (64-bit) ## Running under: macOS Big Sur 11.2.2 ## ## Matrix products: default ## BLAS: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRblas.0.dylib ## LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib ## ## locale: ## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 ## ## attached base packages: ## [1] stats graphics grDevices utils datasets methods base ## ## other attached packages: ## [1] lubridate_1.7.10 readxl_1.3.1 forcats_0.5.1 stringr_1.4.0 ## [5] dplyr_1.0.7 purrr_0.3.4 readr_2.0.1 tidyr_1.1.3 ## [9] tibble_3.1.3 ggplot2_3.3.5 tidyverse_1.3.1 ## ## loaded via a namespace (and not attached): ## [1] tidyselect_1.1.1 xfun_0.25 haven_2.4.3 colorspace_2.0-2 ## [5] vctrs_0.3.8 generics_0.1.0 htmltools_0.5.1.1 yaml_2.2.1 ## [9] utf8_1.2.2 rlang_0.4.11 jquerylib_0.1.4 pillar_1.6.2 ## [13] withr_2.4.2 glue_1.4.2 DBI_1.1.1 dbplyr_2.1.1 ## [17] modelr_0.1.8 lifecycle_1.0.0 munsell_0.5.0 gtable_0.3.0 ## [21] cellranger_1.1.0 rvest_1.0.1 evaluate_0.14 labeling_0.4.2 ## [25] knitr_1.33 tzdb_0.1.2 fansi_0.5.0 highr_0.9 ## [29] broom_0.7.9 Rcpp_1.0.7 backports_1.2.1 scales_1.1.1 ## [33] jsonlite_1.7.2 farver_2.1.0 fs_1.5.0 hms_1.1.0 ## [37] digest_0.6.27 stringi_1.7.3 bookdown_0.23 grid_4.1.1 ## [41] cli_3.0.1 tools_4.1.1 magrittr_2.0.1 pacman_0.5.1 ## [45] crayon_1.4.1 pkgconfig_2.0.3 ellipsis_0.3.2 xml2_1.3.2 ## [49] reprex_2.0.1 assertthat_0.2.1 rmarkdown_2.10 httr_1.4.2 ## [53] rstudioapi_0.13 R6_2.5.1 compiler_4.1.1 References "],["厚生分析セクター別分解分析.html", "Chapter 4 厚生分析:セクター別分解分析 4.1 方法 4.2 職業大分類 4.3 職業中分類 4.4 環境", " Chapter 4 厚生分析:セクター別分解分析 職種別の就職・求人件数が観察可能な2012年から2021年6月までの月次データ、Kawata and Sato (2021) の手法を拡張し、求職者の厚生変化に対する各職種の貢献を記述する。 四半期ごとに集計する 4.1 方法 標準的なDiamond-Mortencen-Pissarides型サーチモデル(Rogerson, Shimer, and Wright 2005)に準じて、以下の4条件式を仮定する 失業状態の価値観 \\[rU=b + \\sum_j\\Delta_j\\] ただし \\[\\Delta_j = \\underbrace{\\frac{m_{j}}{u}(W_j-U)}_{セクターjにおけるサーチ活動からの余剰}\\] \\(m_j:\\) セクターjにおける新規就職件数、\\(u:\\) （総）求職者数、\\(W_j-U:\\) セクターjにおける新規就職から生じる余剰 自由参入条件 \\[k=\\frac{m_j}{v_j}J_j\\] ナッシュ交渉 \\[(1-\\beta)(W_j-U)=\\beta J_j\\] 自由参入条件とナッシュ交渉を連立すると、 \\[W_j-U=\\frac{\\beta}{1-\\beta}k\\frac{v_j}{m_j}\\] よって \\[\\Delta_j = \\underbrace{\\frac{m_j}{u}}_{入職率}\\times \\underbrace{\\frac{\\beta}{1-\\beta}k\\frac{v_j}{m_j}}_{入職からの余剰}\\ \\ (1)\\] (1)式を用いて、以下のような厚生指標が識別できる 4.1.1 セクターの貢献率 (1)式より\\(\\sum_j\\Delta_j = k\\beta/(1-\\beta)\\sum_j v/u\\)なので、あるセクターjが生み出す余剰が全体に占める割合を以下のように識別できる。 \\[\\frac{\\Delta_j}{\\sum_j\\Delta_j}=\\frac{v_j}{v}\\] 4.1.2 余剰の変化に対する貢献 （１）式より、サーチからの余剰の変化率は以下のように書き換えられる \\[\\frac{\\Delta - \\Delta&#39;}{\\Delta&#39;}=\\frac{1}{\\sum_j \\frac{m_j}{u}(W_j-U)}\\sum_j [\\frac{m_j}{u}(W_j-U)- \\frac{m&#39;_j}{u&#39;}(W&#39;_j-U&#39;)]\\] \\[=\\frac{u&#39;}{v&#39;}\\sum_j [\\underbrace{\\frac{m_j}{u}}_{入職率}\\times\\underbrace{\\frac{v_j}{m_j}}_{入職からの余剰}- \\underbrace{\\frac{m&#39;_j}{u&#39;}}_{入職率}\\times\\underbrace{\\frac{v&#39;_j}{m&#39;_j}}_{入職からの余剰}]\\] よって各セクターが生み出す余剰は以下のように書き換えられる \\[\\frac{\\Delta - \\Delta&#39;}{\\Delta&#39;}=\\frac{u&#39;}{v&#39;}\\sum_{j}\\underbrace{[\\frac{v_j}{u}-\\frac{v_j&#39;}{u&#39;}]}_{セクターjが生み出す余剰}\\] さらに分解すると \\[=\\frac{u&#39;}{v&#39;}\\sum_j [\\underbrace{\\frac{m_j}{u}[\\frac{v_j}{m_j}-\\frac{v&#39;_j}{m&#39;_j}]}_{入職からの余剰変化の貢献}+\\underbrace{[\\frac{m_j}{u}- \\frac{m&#39;_j}{u&#39;}]\\frac{v&#39;_j}{m&#39;_j}}_{入職率変化の貢献}]\\] 以上の議論は、セクター別の就職・求人件数のみを用いて、厚生変化をセクター別の貢献に分解可能であることを示している さらにセクター別に入職からの余剰と入職率の変化それぞれの貢献も識別可能である。 上記の識別を可能とする重要な仮定は、パラメータ\\(\\beta\\),\\(k\\)がセクター間で同一であるという仮定である。 4.2 職業大分類 セクター\\(=\\)職業大分類別 大分類別に就職、求人件数を集計し、厚生指標を示す。 4.2.1 Rコード pacman::p_load(&quot;tidyverse&quot;, &quot;readxl&quot;, &quot;lubridate&quot;, &quot;tidymodels&quot;) number.industry = 68 year &lt;- c(rep(2012,10), rep(2013,12), rep(2014,12), rep(2015,12), rep(2016,12), rep(2017,12), rep(2018,12), rep(2019,12), rep(2020,12), rep(2021,6) ) month &lt;- c(3:12, rep(1:12,8), 1:6) sel.row &lt;- 5:72 sel.col &lt;- c(1,19:130) re.sel.col &lt;- 2:113 raw.vacancy &lt;- read_excel(&quot;data/第21表.xlsx&quot;, sheet = &quot;第２１表ー２ 有効求人（パート含む常用）&quot;) %&gt;% .[sel.row,sel.col] |&gt; pivot_longer(cols = re.sel.col, values_to = &quot;n&quot;) |&gt; mutate(year = rep(year, number.industry), month = rep(month,number.industry), type = &quot;求人&quot;, occupation = `職業別有効求人数（パートタイムを含む常用）` ) |&gt; select(-`職業別有効求人数（パートタイムを含む常用）`,-name) raw.seeker &lt;- read_excel(&quot;data/第21表.xlsx&quot;, sheet = &quot; 第２１表ー４ 有効求職（パート含む常用）&quot;) %&gt;% .[sel.row,sel.col] |&gt; pivot_longer(cols = re.sel.col, values_to = &quot;n&quot;) |&gt; mutate(year = rep(year, number.industry), month = rep(month,number.industry), type = &quot;求職&quot;, occupation = `職業別有効求職者数（パートタイムを含む常用）` ) |&gt; select(-`職業別有効求職者数（パートタイムを含む常用）`,-name) raw.hir &lt;- read_excel(&quot;data/第21表.xlsx&quot;, sheet = &quot;第２１表ー５ 就職件数（パート含む常用）&quot;) %&gt;% .[sel.row,sel.col] |&gt; pivot_longer(cols = re.sel.col, values_to = &quot;n&quot;) |&gt; mutate(year = rep(year, number.industry), month = rep(month,number.industry), type = &quot;新規就職&quot;, occupation = `職業別就職件数（パートタイムを含む常用）` ) |&gt; select(-`職業別就職件数（パートタイムを含む常用）`,-name) df &lt;- rbind(raw.hir, raw.vacancy, raw.seeker) |&gt; filter(occupation == &quot;管理的職業&quot; | occupation == &quot;専門的・技術的職業&quot; | occupation == &quot;事務的職業&quot; | occupation == &quot;販売の職業&quot; | occupation == &quot;サービスの職業&quot; | occupation == &quot;輸送・機械運転の職業&quot; | occupation == &quot;生産工程の職業&quot; | occupation == &quot;建設・採掘の職業&quot; | occupation == &quot;運搬・清掃・包装等の職業&quot;| occupation == &quot;分類不能の職業&quot;) |&gt; mutate(quaterly = month |&gt; cut(c(0,3,6,9,12), labels = c(1,2,3,4)), date = yq(str_c(year,quaterly,sep = &quot;:Q&quot;)), n = as.numeric(n) ) |&gt; group_by(date,type,occupation) |&gt; mutate(n = n |&gt; sum()) |&gt; ungroup() |&gt; distinct(year,quaterly,date,type,n,occupation) |&gt; pivot_wider(names_from = type, values_from = n) |&gt; group_by(date) |&gt; mutate(総求職 = sum(求職), 総求人 = sum(求人), 総新規就職 = sum(新規就職)) |&gt; ungroup() 4.2.2 セクターの貢献率 余剰全体に占める各セクターの割合を示す。 df |&gt; filter(occupation != &quot;分類不能の職業&quot;) |&gt; filter(date &gt;= make_date(2012,4)) |&gt; mutate(余剰の割合 = 求人/総求人) |&gt; ggplot(aes(x = date, y = 余剰の割合, group = occupation, color = occupation, shape = occupation) ) + geom_line() + geom_point() + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) サービス/技術・専門の職種が各々、余剰全体の２割以上を生み出している 技術・専門の職種には介護職が含まれており、当該職種が生み出す余剰が特に大きい 4.2.3 総余剰の変化 総余剰の前年同期変化率について、各セクターの貢献率を示す。 df |&gt; filter(occupation != &quot;分類不能の職業&quot;) |&gt; group_by(occupation, quaterly) |&gt; mutate(change = (lag(総求職)/lag(総求人))*((求人/総求職) - (lag(求人)/lag(総求職))) ) |&gt; ungroup() |&gt; filter(date &gt;= make_date(2013,4)) |&gt; ggplot(aes(x = date, y = change, group = occupation, color = occupation, shape = occupation) ) + geom_line() + geom_point() + geom_hline(yintercept = 0) + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) + ylim(-0.12,0.06) サービスの職種が、2020年間の総余剰の急落の大きな源泉となっている。 2021年においても依然として低水準にとどまっている 2020年の水準を上回るのは、生産工程の職種のみ 4.2.3.1 入職からの余剰の貢献 各セクターごとに、入職からの余剰の貢献を示す df |&gt; filter(occupation != &quot;分類不能の職業&quot;) |&gt; group_by(occupation, quaterly) |&gt; mutate(change = (lag(総求職)/lag(総求人))*(新規就職/総求職)*((求人/新規就職) - (lag(求人)/lag(新規就職))) ) |&gt; ungroup() |&gt; filter(date &gt;= make_date(2013,4)) |&gt; ggplot(aes(x = date, y = change, group = occupation, color = occupation, shape = occupation) ) + geom_line() + geom_point() + geom_hline(yintercept = 0) + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) + ylim(-0.12,0.06) サービスの職種において急落がみられ、かつ下落傾向が拡大している。 4.2.3.2 入職率の貢献 各セクター別に、入職率の貢献を示す。 df |&gt; filter(occupation != &quot;分類不能の職業&quot;) |&gt; group_by(occupation, quaterly) |&gt; mutate(change = (lag(総求職)/lag(総求人))*(lag(求人)/lag(新規就職))*((新規就職/総求職) - (lag(新規就職)/lag(総求職))) ) |&gt; ungroup() |&gt; filter(date &gt;= make_date(2013,4)) |&gt; ggplot(aes(x = date, y = change, group = occupation, color = occupation, shape = occupation) ) + geom_line() + geom_point() + geom_hline(yintercept = 0) + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) + ylim(-0.12,0.06) ２０２０年間には、サービスの職種が最も下落している。 ２０２１年には、全職種において下げ止まりが見られる。 4.3 職業中分類 セクター\\(=\\)職業中分類 中分類別に就職、求人件数を集計し、厚生指標を示す。 4.3.1 Rコード df &lt;- rbind(raw.hir, raw.vacancy, raw.seeker) |&gt; filter(occupation != &quot;職業計&quot; &amp; occupation != &quot;管理的職業&quot; &amp; occupation != &quot;専門的・技術的職業&quot; &amp; occupation != &quot;事務的職業&quot; &amp; occupation != &quot;販売の職業&quot; &amp; occupation != &quot;サービスの職業&quot; &amp; occupation != &quot;輸送・機械運転の職業&quot; &amp; occupation != &quot;生産工程の職業&quot; &amp; occupation != &quot;建設・採掘の職業&quot; &amp; occupation != &quot;運搬・清掃・包装等の職業&quot;&amp; occupation != &quot;分類不能の職業&quot;) |&gt; mutate(quaterly = month |&gt; cut(c(0,3,6,9,12), labels = c(1,2,3,4)), date = yq(str_c(year,quaterly,sep = &quot;:Q&quot;)), n = as.numeric(n) ) |&gt; group_by(date,type,occupation) |&gt; mutate(n = n |&gt; sum()) |&gt; ungroup() |&gt; distinct(year,quaterly,date,type,n,occupation) |&gt; pivot_wider(names_from = type, values_from = n) |&gt; group_by(date) |&gt; mutate(総求職 = sum(求職), 総求人 = sum(求人), 総新規就職 = sum(新規就職)) |&gt; ungroup() df.agre &lt;- df |&gt; group_by(occupation) |&gt; mutate(share = sum(求人)) |&gt; ungroup() |&gt; distinct(occupation, share) |&gt; mutate(group = if_else(share &lt;= quantile(share, prob = 0.9),&quot;その他&quot;,occupation)) df &lt;- df |&gt; left_join(df.agre, by = &quot;occupation&quot;) 4.3.2 セクターの貢献率 余剰全体に占める各セクターの割合を示す。 df |&gt; filter(date &gt;= make_date(2012,4)) |&gt; mutate(余剰の割合 = 求人/総求人) |&gt; ggplot(aes(x = date, y = 余剰の割合, group = occupation, color = group, shape = group) ) + geom_line() + geom_point() + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) サービス/技術・専門の職種が各々、余剰全体の２割以上を生み出している 技術・専門の職種には介護職が含まれており、当該職種が生み出す余剰が特に大きい 4.3.3 総余剰の変化 総余剰の前年同期変化率について、各セクターの貢献率を示す。 df |&gt; filter(occupation != &quot;分類不能の職業&quot;) |&gt; group_by(occupation, quaterly) |&gt; mutate(change = (lag(総求職)/lag(総求人))*((求人/総求職) - (lag(求人)/lag(総求職))) ) |&gt; ungroup() |&gt; filter(date &gt;= make_date(2013,4)) |&gt; ggplot(aes(x = date, y = change, group = occupation, color = group, shape = group) ) + geom_line() + geom_point() + geom_hline(yintercept = 0) + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) + ylim(-0.12,0.06) サービスの職種が、2020年間の総余剰の急落の大きな源泉となっている。 2021年においても依然として低水準にとどまっている 2020年の水準を上回るのは、生産工程の職種のみ 4.3.3.1 入職からの余剰の貢献 各セクターごとに、入職からの余剰の貢献を示す df |&gt; filter(occupation != &quot;分類不能の職業&quot;) |&gt; group_by(occupation, quaterly) |&gt; mutate(change = (lag(総求職)/lag(総求人))*(新規就職/総求職)*((求人/新規就職) - (lag(求人)/lag(新規就職))) ) |&gt; ungroup() |&gt; filter(date &gt;= make_date(2013,4)) |&gt; ggplot(aes(x = date, y = change, group = occupation, color = group, shape = group) ) + geom_line() + geom_point() + geom_hline(yintercept = 0) + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) + ylim(-0.12,0.06) サービスの職種において急落がみられ、かつ下落傾向が拡大している。 4.3.3.2 入職率の貢献 各セクター別に、入職率の貢献を示す。 df |&gt; filter(occupation != &quot;分類不能の職業&quot;) |&gt; group_by(occupation, quaterly) |&gt; mutate(change = (lag(総求職)/lag(総求人))*(lag(求人)/lag(新規就職))*((新規就職/総求職) - (lag(新規就職)/lag(総求職))) ) |&gt; ungroup() |&gt; filter(date &gt;= make_date(2013,4)) |&gt; ggplot(aes(x = date, y = change, group = occupation, color = group, shape = group) ) + geom_line() + geom_point() + geom_hline(yintercept = 0) + theme_bw(base_family = &quot;HiraKakuPro-W3&quot;) + ylim(-0.12,0.06) ２０２０年間には、サービスの職種が最も下落している。 ２０２１年には、全職種において下げ止まりが見られる。 4.4 環境 sessionInfo() ## R version 4.1.1 (2021-08-10) ## Platform: aarch64-apple-darwin20 (64-bit) ## Running under: macOS Big Sur 11.2.2 ## ## Matrix products: default ## BLAS: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRblas.0.dylib ## LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib ## ## locale: ## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8 ## ## attached base packages: ## [1] stats graphics grDevices utils datasets methods base ## ## other attached packages: ## [1] yardstick_0.0.8 workflowsets_0.1.0 workflows_0.2.3 tune_0.1.6 ## [5] rsample_0.1.0 recipes_0.1.16 parsnip_0.1.7 modeldata_0.1.1 ## [9] infer_1.0.0 dials_0.0.9 scales_1.1.1 broom_0.7.9 ## [13] tidymodels_0.1.3 lubridate_1.7.10 readxl_1.3.1 forcats_0.5.1 ## [17] stringr_1.4.0 dplyr_1.0.7 purrr_0.3.4 readr_2.0.1 ## [21] tidyr_1.1.3 tibble_3.1.3 ggplot2_3.3.5 tidyverse_1.3.1 ## ## loaded via a namespace (and not attached): ## [1] fs_1.5.0 DiceDesign_1.9 httr_1.4.2 tools_4.1.1 ## [5] backports_1.2.1 utf8_1.2.2 R6_2.5.1 rpart_4.1-15 ## [9] DBI_1.1.1 colorspace_2.0-2 nnet_7.3-16 withr_2.4.2 ## [13] tidyselect_1.1.1 compiler_4.1.1 cli_3.0.1 rvest_1.0.1 ## [17] pacman_0.5.1 xml2_1.3.2 labeling_0.4.2 bookdown_0.23 ## [21] digest_0.6.27 rmarkdown_2.10 pkgconfig_2.0.3 htmltools_0.5.1.1 ## [25] parallelly_1.27.0 lhs_1.1.1 dbplyr_2.1.1 highr_0.9 ## [29] rlang_0.4.11 rstudioapi_0.13 jquerylib_0.1.4 farver_2.1.0 ## [33] generics_0.1.0 jsonlite_1.7.2 magrittr_2.0.1 Matrix_1.3-4 ## [37] GPfit_1.0-8 Rcpp_1.0.7 munsell_0.5.0 fansi_0.5.0 ## [41] lifecycle_1.0.0 furrr_0.2.3 pROC_1.17.0.1 stringi_1.7.3 ## [45] yaml_2.2.1 MASS_7.3-54 plyr_1.8.6 grid_4.1.1 ## [49] parallel_4.1.1 listenv_0.8.0 crayon_1.4.1 lattice_0.20-44 ## [53] haven_2.4.3 splines_4.1.1 hms_1.1.0 knitr_1.33 ## [57] pillar_1.6.2 codetools_0.2-18 reprex_2.0.1 glue_1.4.2 ## [61] evaluate_0.14 modelr_0.1.8 foreach_1.5.1 vctrs_0.3.8 ## [65] tzdb_0.1.2 cellranger_1.1.0 gtable_0.3.0 future_1.21.0 ## [69] assertthat_0.2.1 xfun_0.25 gower_0.2.2 prodlim_2019.11.13 ## [73] class_7.3-19 survival_3.2-12 timeDate_3043.102 iterators_1.0.13 ## [77] hardhat_0.1.6 lava_1.6.9 globals_0.14.0 ellipsis_0.3.2 ## [81] ipred_0.9-11 References "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
