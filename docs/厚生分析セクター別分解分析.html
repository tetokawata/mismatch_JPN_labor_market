<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 厚生分析:セクター別分解分析 | ハローワークデータからみる労働市場</title>
  <meta name="description" content="TBA" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 厚生分析:セクター別分解分析 | ハローワークデータからみる労働市場" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="TBA" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 厚生分析:セクター別分解分析 | ハローワークデータからみる労働市場" />
  
  <meta name="twitter:description" content="TBA" />
  

<meta name="author" content="川田恵介" />


<meta name="date" content="2021-09-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="厚生分析時系列比較.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Labor Market Mismatch in Japan</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> 要約</a></li>
<li class="chapter" data-level="2" data-path="記述統計量.html"><a href="記述統計量.html"><i class="fa fa-check"></i><b>2</b> 記述統計量</a>
<ul>
<li class="chapter" data-level="2.1" data-path="記述統計量.html"><a href="記述統計量.html#方法"><i class="fa fa-check"></i><b>2.1</b> 方法</a></li>
<li class="chapter" data-level="2.2" data-path="記述統計量.html"><a href="記述統計量.html#求人求職就職件数"><i class="fa fa-check"></i><b>2.2</b> 求人/求職/就職件数</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="記述統計量.html"><a href="記述統計量.html#rコード"><i class="fa fa-check"></i><b>2.2.1</b> Rコード</a></li>
<li class="chapter" data-level="2.2.2" data-path="記述統計量.html"><a href="記述統計量.html#結果"><i class="fa fa-check"></i><b>2.2.2</b> 結果</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="記述統計量.html"><a href="記述統計量.html#入職充足求人倍率"><i class="fa fa-check"></i><b>2.3</b> 入職/充足/求人倍率</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="記述統計量.html"><a href="記述統計量.html#rコード-1"><i class="fa fa-check"></i><b>2.3.1</b> Rコード</a></li>
<li class="chapter" data-level="2.3.2" data-path="記述統計量.html"><a href="記述統計量.html#結果-1"><i class="fa fa-check"></i><b>2.3.2</b> 結果</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="記述統計量.html"><a href="記述統計量.html#環境"><i class="fa fa-check"></i><b>2.4</b> 環境</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="厚生分析時系列比較.html"><a href="厚生分析時系列比較.html"><i class="fa fa-check"></i><b>3</b> 厚生分析:時系列比較</a>
<ul>
<li class="chapter" data-level="3.1" data-path="厚生分析時系列比較.html"><a href="厚生分析時系列比較.html#方法-1"><i class="fa fa-check"></i><b>3.1</b> 方法</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="厚生分析時系列比較.html"><a href="厚生分析時系列比較.html#識別"><i class="fa fa-check"></i><b>3.1.1</b> 識別</a></li>
<li class="chapter" data-level="3.1.2" data-path="厚生分析時系列比較.html"><a href="厚生分析時系列比較.html#時系列比較への応用"><i class="fa fa-check"></i><b>3.1.2</b> 時系列比較への応用</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="厚生分析時系列比較.html"><a href="厚生分析時系列比較.html#rコード-2"><i class="fa fa-check"></i><b>3.2</b> Rコード</a></li>
<li class="chapter" data-level="3.3" data-path="厚生分析時系列比較.html"><a href="厚生分析時系列比較.html#結果-2"><i class="fa fa-check"></i><b>3.3</b> 結果</a></li>
<li class="chapter" data-level="3.4" data-path="厚生分析時系列比較.html"><a href="厚生分析時系列比較.html#環境-1"><i class="fa fa-check"></i><b>3.4</b> 環境</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html"><i class="fa fa-check"></i><b>4</b> 厚生分析:セクター別分解分析</a>
<ul>
<li class="chapter" data-level="4.1" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#方法-2"><i class="fa fa-check"></i><b>4.1</b> 方法</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#セクターの貢献率"><i class="fa fa-check"></i><b>4.1.1</b> セクターの貢献率</a></li>
<li class="chapter" data-level="4.1.2" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#余剰の変化に対する貢献"><i class="fa fa-check"></i><b>4.1.2</b> 余剰の変化に対する貢献</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#職業大分類"><i class="fa fa-check"></i><b>4.2</b> 職業大分類</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#rコード-3"><i class="fa fa-check"></i><b>4.2.1</b> Rコード</a></li>
<li class="chapter" data-level="4.2.2" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#セクターの貢献率-1"><i class="fa fa-check"></i><b>4.2.2</b> セクターの貢献率</a></li>
<li class="chapter" data-level="4.2.3" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#総余剰の変化"><i class="fa fa-check"></i><b>4.2.3</b> 総余剰の変化</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#職業中分類"><i class="fa fa-check"></i><b>4.3</b> 職業中分類</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#rコード-4"><i class="fa fa-check"></i><b>4.3.1</b> Rコード</a></li>
<li class="chapter" data-level="4.3.2" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#セクターの貢献率-2"><i class="fa fa-check"></i><b>4.3.2</b> セクターの貢献率</a></li>
<li class="chapter" data-level="4.3.3" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#総余剰の変化-1"><i class="fa fa-check"></i><b>4.3.3</b> 総余剰の変化</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="厚生分析セクター別分解分析.html"><a href="厚生分析セクター別分解分析.html#環境-2"><i class="fa fa-check"></i><b>4.4</b> 環境</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ハローワークデータからみる労働市場</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="厚生分析セクター別分解分析" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> 厚生分析:セクター別分解分析</h1>
<ul>
<li><p>職種別の就職・求人件数が観察可能な2012年から2021年6月までの月次データ、<span class="citation"><a href="#ref-kawata2021first" role="doc-biblioref">Kawata and Sato</a> (<a href="#ref-kawata2021first" role="doc-biblioref">2021</a>)</span> の手法を拡張し、求職者の厚生変化に対する各職種の貢献を記述する。</p>
<ul>
<li>四半期ごとに集計する</li>
</ul></li>
</ul>
<div id="方法-2" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> 方法</h2>
<ul>
<li><p>標準的なDiamond-Mortencen-Pissarides型サーチモデル<span class="citation">(<a href="#ref-rogerson2005search" role="doc-biblioref">Rogerson, Shimer, and Wright 2005</a>)</span>に準じて、以下の4条件式を仮定する</p></li>
<li><p>失業状態の価値観</p></li>
</ul>
<p><span class="math display">\[rU=b + \sum_j\Delta_j\]</span></p>
<p>ただし</p>
<p><span class="math display">\[\Delta_j = \underbrace{\frac{m_{j}}{u}(W_j-U)}_{セクターjにおけるサーチ活動からの余剰}\]</span></p>
<p><span class="math inline">\(m_j:\)</span> セクターjにおける新規就職件数、<span class="math inline">\(u:\)</span> （総）求職者数、<span class="math inline">\(W_j-U:\)</span> セクターjにおける新規就職から生じる余剰</p>
<ul>
<li>自由参入条件</li>
</ul>
<p><span class="math display">\[k=\frac{m_j}{v_j}J_j\]</span></p>
<ul>
<li>ナッシュ交渉</li>
</ul>
<p><span class="math display">\[(1-\beta)(W_j-U)=\beta J_j\]</span></p>
<ul>
<li>自由参入条件とナッシュ交渉を連立すると、</li>
</ul>
<p><span class="math display">\[W_j-U=\frac{\beta}{1-\beta}k\frac{v_j}{m_j}\]</span></p>
<p>よって</p>
<p><span class="math display">\[\Delta_j = \underbrace{\frac{m_j}{u}}_{入職率}\times \underbrace{\frac{\beta}{1-\beta}k\frac{v_j}{m_j}}_{入職からの余剰}\ \ (1)\]</span></p>
<ul>
<li>(1)式を用いて、以下のような厚生指標が識別できる</li>
</ul>
<div id="セクターの貢献率" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> セクターの貢献率</h3>
<ul>
<li>(1)式より<span class="math inline">\(\sum_j\Delta_j = k\beta/(1-\beta)\sum_j v/u\)</span>なので、あるセクター<span class="math inline">\(j\)</span>が生み出す余剰が全体に占める割合は、以下のように識別できる。</li>
</ul>
<p><span class="math display">\[\frac{\Delta_j}{\sum_j\Delta_j}=\frac{v_j}{v}\]</span></p>
</div>
<div id="余剰の変化に対する貢献" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> 余剰の変化に対する貢献</h3>
<ul>
<li>（１）式より、サーチからの余剰の変化率は以下のように書き換えられる</li>
</ul>
<p><span class="math display">\[\frac{\Delta - \Delta&#39;}{\Delta&#39;}=\frac{1}{\sum_j \frac{m_j}{u}(W_j-U)}\sum_j [\frac{m_j}{u}(W_j-U)- \frac{m&#39;_j}{u&#39;}(W&#39;_j-U&#39;)]\]</span></p>
<p><span class="math display">\[=\frac{u&#39;}{v&#39;}\sum_j [\underbrace{\frac{m_j}{u}}_{入職率}\times\underbrace{\frac{v_j}{m_j}}_{入職からの余剰}- \underbrace{\frac{m&#39;_j}{u&#39;}}_{入職率}\times\underbrace{\frac{v&#39;_j}{m&#39;_j}}_{入職からの余剰}]\]</span></p>
<ul>
<li>よって各セクターが生み出す余剰は以下のように書き換えられる</li>
</ul>
<p><span class="math display">\[\frac{\Delta - \Delta&#39;}{\Delta&#39;}=\frac{u&#39;}{v&#39;}\sum_{j}\underbrace{[\frac{v_j}{u}-\frac{v_j&#39;}{u&#39;}]}_{セクターjが生み出す余剰}\]</span></p>
<ul>
<li>さらに分解すると</li>
</ul>
<p><span class="math display">\[=\frac{u&#39;}{v&#39;}\sum_j [\underbrace{\frac{m_j}{u}[\frac{v_j}{m_j}-\frac{v&#39;_j}{m&#39;_j}]}_{入職からの余剰変化の貢献}+\underbrace{[\frac{m_j}{u}- \frac{m&#39;_j}{u&#39;}]\frac{v&#39;_j}{m&#39;_j}}_{入職率変化の貢献}]\]</span></p>
<ul>
<li><p>以上の議論は、セクター別の就職・求人件数のみを用いて、厚生変化をセクター別の貢献に分解可能であることを示している。</p>
<ul>
<li>セクター別の入職からの余剰と入職率の変化、それぞれの貢献も識別可能である。</li>
</ul></li>
<li><p>上記の識別を可能とする重要な仮定は、パラメータ<span class="math inline">\(\beta\)</span>,<span class="math inline">\(k\)</span>がセクター間で同一であるという仮定である。</p></li>
</ul>
</div>
</div>
<div id="職業大分類" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> 職業大分類</h2>
<ul>
<li><p>セクター<span class="math inline">\(=\)</span>職業大分類別</p></li>
<li><p>大分類別に就職、求人件数を集計し、厚生指標を示す。</p></li>
</ul>
<div id="rコード-3" class="section level3" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Rコード</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="厚生分析セクター別分解分析.html#cb11-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(<span class="st">&quot;tidyverse&quot;</span>,</span>
<span id="cb11-2"><a href="厚生分析セクター別分解分析.html#cb11-2" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;readxl&quot;</span>,</span>
<span id="cb11-3"><a href="厚生分析セクター別分解分析.html#cb11-3" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;lubridate&quot;</span>,</span>
<span id="cb11-4"><a href="厚生分析セクター別分解分析.html#cb11-4" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;tidymodels&quot;</span>,</span>
<span id="cb11-5"><a href="厚生分析セクター別分解分析.html#cb11-5" aria-hidden="true" tabindex="-1"></a>               <span class="st">&quot;Rfast&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="厚生分析セクター別分解分析.html#cb12-1" aria-hidden="true" tabindex="-1"></a>number.industry <span class="ot">=</span> <span class="dv">68</span></span>
<span id="cb12-2"><a href="厚生分析セクター別分解分析.html#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="厚生分析セクター別分解分析.html#cb12-3" aria-hidden="true" tabindex="-1"></a>year <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">2012</span>,<span class="dv">10</span>),</span>
<span id="cb12-4"><a href="厚生分析セクター別分解分析.html#cb12-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2013</span>,<span class="dv">12</span>),</span>
<span id="cb12-5"><a href="厚生分析セクター別分解分析.html#cb12-5" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2014</span>,<span class="dv">12</span>),</span>
<span id="cb12-6"><a href="厚生分析セクター別分解分析.html#cb12-6" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2015</span>,<span class="dv">12</span>),</span>
<span id="cb12-7"><a href="厚生分析セクター別分解分析.html#cb12-7" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2016</span>,<span class="dv">12</span>),</span>
<span id="cb12-8"><a href="厚生分析セクター別分解分析.html#cb12-8" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2017</span>,<span class="dv">12</span>),</span>
<span id="cb12-9"><a href="厚生分析セクター別分解分析.html#cb12-9" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2018</span>,<span class="dv">12</span>),</span>
<span id="cb12-10"><a href="厚生分析セクター別分解分析.html#cb12-10" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2019</span>,<span class="dv">12</span>),</span>
<span id="cb12-11"><a href="厚生分析セクター別分解分析.html#cb12-11" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2020</span>,<span class="dv">12</span>),</span>
<span id="cb12-12"><a href="厚生分析セクター別分解分析.html#cb12-12" aria-hidden="true" tabindex="-1"></a>          <span class="fu">rep</span>(<span class="dv">2021</span>,<span class="dv">6</span>)</span>
<span id="cb12-13"><a href="厚生分析セクター別分解分析.html#cb12-13" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb12-14"><a href="厚生分析セクター別分解分析.html#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="厚生分析セクター別分解分析.html#cb12-15" aria-hidden="true" tabindex="-1"></a>month <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">12</span>,</span>
<span id="cb12-16"><a href="厚生分析セクター別分解分析.html#cb12-16" aria-hidden="true" tabindex="-1"></a>           <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>,<span class="dv">8</span>),</span>
<span id="cb12-17"><a href="厚生分析セクター別分解分析.html#cb12-17" aria-hidden="true" tabindex="-1"></a>           <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>)</span>
<span id="cb12-18"><a href="厚生分析セクター別分解分析.html#cb12-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-19"><a href="厚生分析セクター別分解分析.html#cb12-19" aria-hidden="true" tabindex="-1"></a>sel.row <span class="ot">&lt;-</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">72</span></span>
<span id="cb12-20"><a href="厚生分析セクター別分解分析.html#cb12-20" aria-hidden="true" tabindex="-1"></a>sel.col <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">19</span><span class="sc">:</span><span class="dv">130</span>)</span>
<span id="cb12-21"><a href="厚生分析セクター別分解分析.html#cb12-21" aria-hidden="true" tabindex="-1"></a>re.sel.col <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">113</span></span>
<span id="cb12-22"><a href="厚生分析セクター別分解分析.html#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="厚生分析セクター別分解分析.html#cb12-23" aria-hidden="true" tabindex="-1"></a>raw.vacancy <span class="ot">&lt;-</span></span>
<span id="cb12-24"><a href="厚生分析セクター別分解分析.html#cb12-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;data/第21表.xlsx&quot;</span> <span class="sc">|&gt;</span> </span>
<span id="cb12-25"><a href="厚生分析セクター別分解分析.html#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_excel</span>(<span class="at">sheet =</span> <span class="st">&quot;第２１表ー２　有効求人（パート含む常用）&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-26"><a href="厚生分析セクター別分解分析.html#cb12-26" aria-hidden="true" tabindex="-1"></a>  .[sel.row,sel.col] <span class="sc">|&gt;</span> </span>
<span id="cb12-27"><a href="厚生分析セクター別分解分析.html#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> re.sel.col,</span>
<span id="cb12-28"><a href="厚生分析セクター別分解分析.html#cb12-28" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;n&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-29"><a href="厚生分析セクター別分解分析.html#cb12-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">rep</span>(year, number.industry),</span>
<span id="cb12-30"><a href="厚生分析セクター別分解分析.html#cb12-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> <span class="fu">rep</span>(month,number.industry),</span>
<span id="cb12-31"><a href="厚生分析セクター別分解分析.html#cb12-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">type =</span> <span class="st">&quot;求人&quot;</span>,</span>
<span id="cb12-32"><a href="厚生分析セクター別分解分析.html#cb12-32" aria-hidden="true" tabindex="-1"></a>         <span class="at">occupation =</span> <span class="st">`</span><span class="at">職業別有効求人数（パートタイムを含む常用）</span><span class="st">`</span></span>
<span id="cb12-33"><a href="厚生分析セクター別分解分析.html#cb12-33" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb12-34"><a href="厚生分析セクター別分解分析.html#cb12-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">職業別有効求人数（パートタイムを含む常用）</span><span class="st">`</span>,<span class="sc">-</span>name)</span>
<span id="cb12-35"><a href="厚生分析セクター別分解分析.html#cb12-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-36"><a href="厚生分析セクター別分解分析.html#cb12-36" aria-hidden="true" tabindex="-1"></a>raw.seeker <span class="ot">&lt;-</span></span>
<span id="cb12-37"><a href="厚生分析セクター別分解分析.html#cb12-37" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;data/第21表.xlsx&quot;</span> <span class="sc">|&gt;</span> </span>
<span id="cb12-38"><a href="厚生分析セクター別分解分析.html#cb12-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_excel</span>(<span class="at">sheet =</span> <span class="st">&quot; 第２１表ー４　有効求職（パート含む常用）&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-39"><a href="厚生分析セクター別分解分析.html#cb12-39" aria-hidden="true" tabindex="-1"></a>  .[sel.row,sel.col] <span class="sc">|&gt;</span> </span>
<span id="cb12-40"><a href="厚生分析セクター別分解分析.html#cb12-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> re.sel.col,</span>
<span id="cb12-41"><a href="厚生分析セクター別分解分析.html#cb12-41" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;n&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-42"><a href="厚生分析セクター別分解分析.html#cb12-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">rep</span>(year, number.industry),</span>
<span id="cb12-43"><a href="厚生分析セクター別分解分析.html#cb12-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> <span class="fu">rep</span>(month,number.industry),</span>
<span id="cb12-44"><a href="厚生分析セクター別分解分析.html#cb12-44" aria-hidden="true" tabindex="-1"></a>         <span class="at">type =</span> <span class="st">&quot;求職&quot;</span>,</span>
<span id="cb12-45"><a href="厚生分析セクター別分解分析.html#cb12-45" aria-hidden="true" tabindex="-1"></a>         <span class="at">occupation =</span> <span class="st">`</span><span class="at">職業別有効求職者数（パートタイムを含む常用）</span><span class="st">`</span></span>
<span id="cb12-46"><a href="厚生分析セクター別分解分析.html#cb12-46" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb12-47"><a href="厚生分析セクター別分解分析.html#cb12-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">職業別有効求職者数（パートタイムを含む常用）</span><span class="st">`</span>,<span class="sc">-</span>name)</span>
<span id="cb12-48"><a href="厚生分析セクター別分解分析.html#cb12-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-49"><a href="厚生分析セクター別分解分析.html#cb12-49" aria-hidden="true" tabindex="-1"></a>raw.hir <span class="ot">&lt;-</span></span>
<span id="cb12-50"><a href="厚生分析セクター別分解分析.html#cb12-50" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;data/第21表.xlsx&quot;</span> <span class="sc">|&gt;</span> </span>
<span id="cb12-51"><a href="厚生分析セクター別分解分析.html#cb12-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_excel</span>(<span class="at">sheet =</span> <span class="st">&quot;第２１表ー５　 就職件数（パート含む常用）&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-52"><a href="厚生分析セクター別分解分析.html#cb12-52" aria-hidden="true" tabindex="-1"></a>  .[sel.row,sel.col] <span class="sc">|&gt;</span> </span>
<span id="cb12-53"><a href="厚生分析セクター別分解分析.html#cb12-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> re.sel.col,</span>
<span id="cb12-54"><a href="厚生分析セクター別分解分析.html#cb12-54" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;n&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-55"><a href="厚生分析セクター別分解分析.html#cb12-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">rep</span>(year, number.industry),</span>
<span id="cb12-56"><a href="厚生分析セクター別分解分析.html#cb12-56" aria-hidden="true" tabindex="-1"></a>         <span class="at">month =</span> <span class="fu">rep</span>(month,number.industry),</span>
<span id="cb12-57"><a href="厚生分析セクター別分解分析.html#cb12-57" aria-hidden="true" tabindex="-1"></a>         <span class="at">type =</span> <span class="st">&quot;新規就職&quot;</span>,</span>
<span id="cb12-58"><a href="厚生分析セクター別分解分析.html#cb12-58" aria-hidden="true" tabindex="-1"></a>         <span class="at">occupation =</span> <span class="st">`</span><span class="at">職業別就職件数（パートタイムを含む常用）</span><span class="st">`</span></span>
<span id="cb12-59"><a href="厚生分析セクター別分解分析.html#cb12-59" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb12-60"><a href="厚生分析セクター別分解分析.html#cb12-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">職業別就職件数（パートタイムを含む常用）</span><span class="st">`</span>,<span class="sc">-</span>name)</span>
<span id="cb12-61"><a href="厚生分析セクター別分解分析.html#cb12-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-62"><a href="厚生分析セクター別分解分析.html#cb12-62" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb12-63"><a href="厚生分析セクター別分解分析.html#cb12-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(raw.hir,</span>
<span id="cb12-64"><a href="厚生分析セクター別分解分析.html#cb12-64" aria-hidden="true" tabindex="-1"></a>        raw.vacancy,</span>
<span id="cb12-65"><a href="厚生分析セクター別分解分析.html#cb12-65" aria-hidden="true" tabindex="-1"></a>        raw.seeker) <span class="sc">|&gt;</span> </span>
<span id="cb12-66"><a href="厚生分析セクター別分解分析.html#cb12-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">==</span> <span class="st">&quot;管理的職業&quot;</span> <span class="sc">|</span></span>
<span id="cb12-67"><a href="厚生分析セクター別分解分析.html#cb12-67" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;専門的・技術的職業&quot;</span> <span class="sc">|</span> </span>
<span id="cb12-68"><a href="厚生分析セクター別分解分析.html#cb12-68" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;事務的職業&quot;</span> <span class="sc">|</span></span>
<span id="cb12-69"><a href="厚生分析セクター別分解分析.html#cb12-69" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;販売の職業&quot;</span> <span class="sc">|</span></span>
<span id="cb12-70"><a href="厚生分析セクター別分解分析.html#cb12-70" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;サービスの職業&quot;</span> <span class="sc">|</span></span>
<span id="cb12-71"><a href="厚生分析セクター別分解分析.html#cb12-71" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;輸送・機械運転の職業&quot;</span> <span class="sc">|</span></span>
<span id="cb12-72"><a href="厚生分析セクター別分解分析.html#cb12-72" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;生産工程の職業&quot;</span> <span class="sc">|</span></span>
<span id="cb12-73"><a href="厚生分析セクター別分解分析.html#cb12-73" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;建設・採掘の職業&quot;</span> <span class="sc">|</span></span>
<span id="cb12-74"><a href="厚生分析セクター別分解分析.html#cb12-74" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;運搬・清掃・包装等の職業&quot;</span><span class="sc">|</span></span>
<span id="cb12-75"><a href="厚生分析セクター別分解分析.html#cb12-75" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">==</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb12-76"><a href="厚生分析セクター別分解分析.html#cb12-76" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">quaterly =</span> month <span class="sc">|&gt;</span> <span class="fu">cut</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)),</span>
<span id="cb12-77"><a href="厚生分析セクター別分解分析.html#cb12-77" aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> <span class="fu">yq</span>(<span class="fu">str_c</span>(year,quaterly,<span class="at">sep =</span> <span class="st">&quot;:Q&quot;</span>)),</span>
<span id="cb12-78"><a href="厚生分析セクター別分解分析.html#cb12-78" aria-hidden="true" tabindex="-1"></a>         <span class="at">n =</span> <span class="fu">as.numeric</span>(n)</span>
<span id="cb12-79"><a href="厚生分析セクター別分解分析.html#cb12-79" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb12-80"><a href="厚生分析セクター別分解分析.html#cb12-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date,type,occupation) <span class="sc">|&gt;</span> </span>
<span id="cb12-81"><a href="厚生分析セクター別分解分析.html#cb12-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n =</span> n <span class="sc">|&gt;</span> <span class="fu">sum</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb12-82"><a href="厚生分析セクター別分解分析.html#cb12-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb12-83"><a href="厚生分析セクター別分解分析.html#cb12-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(year,quaterly,date,type,n,occupation) <span class="sc">|&gt;</span> </span>
<span id="cb12-84"><a href="厚生分析セクター別分解分析.html#cb12-84" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type,</span>
<span id="cb12-85"><a href="厚生分析セクター別分解分析.html#cb12-85" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb12-86"><a href="厚生分析セクター別分解分析.html#cb12-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">|&gt;</span> </span>
<span id="cb12-87"><a href="厚生分析セクター別分解分析.html#cb12-87" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(総求職 <span class="ot">=</span> <span class="fu">sum</span>(求職),</span>
<span id="cb12-88"><a href="厚生分析セクター別分解分析.html#cb12-88" aria-hidden="true" tabindex="-1"></a>            総求人 <span class="ot">=</span> <span class="fu">sum</span>(求人),</span>
<span id="cb12-89"><a href="厚生分析セクター別分解分析.html#cb12-89" aria-hidden="true" tabindex="-1"></a>            総新規就職 <span class="ot">=</span> <span class="fu">sum</span>(新規就職)) <span class="sc">|&gt;</span> </span>
<span id="cb12-90"><a href="厚生分析セクター別分解分析.html#cb12-90" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
</div>
<div id="セクターの貢献率-1" class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> セクターの貢献率</h3>
<ul>
<li>余剰全体に占める各セクターの割合を示す。</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="厚生分析セクター別分解分析.html#cb13-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="厚生分析セクター別分解分析.html#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">!=</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb13-3"><a href="厚生分析セクター別分解分析.html#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2012</span>,<span class="dv">4</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="厚生分析セクター別分解分析.html#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(余剰の割合 <span class="ot">=</span> 求人<span class="sc">/</span>総求人) <span class="sc">|&gt;</span> </span>
<span id="cb13-5"><a href="厚生分析セクター別分解分析.html#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date,</span>
<span id="cb13-6"><a href="厚生分析セクター別分解分析.html#cb13-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> 余剰の割合,</span>
<span id="cb13-7"><a href="厚生分析セクター別分解分析.html#cb13-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> occupation,</span>
<span id="cb13-8"><a href="厚生分析セクター別分解分析.html#cb13-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">color =</span> occupation,</span>
<span id="cb13-9"><a href="厚生分析セクター別分解分析.html#cb13-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">shape =</span> occupation)</span>
<span id="cb13-10"><a href="厚生分析セクター別分解分析.html#cb13-10" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb13-11"><a href="厚生分析セクター別分解分析.html#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb13-12"><a href="厚生分析セクター別分解分析.html#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-13"><a href="厚生分析セクター別分解分析.html#cb13-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuPro-W3&quot;</span>)</span></code></pre></div>
<p><img src="test_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<ul>
<li><p>サービス/技術・専門の職種はそれぞれで余剰全体の２割以上を生み出している</p>
<ul>
<li>技術・専門の職種には介護職が含まれており、当該職種が生み出す余剰が特に大きい</li>
</ul></li>
</ul>
</div>
<div id="総余剰の変化" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> 総余剰の変化</h3>
<ul>
<li>総余剰の前年同期変化率について、各セクターの貢献率を示す。</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="厚生分析セクター別分解分析.html#cb14-1" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="ot">&lt;-</span></span>
<span id="cb14-2"><a href="厚生分析セクター別分解分析.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb14-3"><a href="厚生分析セクター別分解分析.html#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">!=</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb14-4"><a href="厚生分析セクター別分解分析.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(occupation, quaterly) <span class="sc">|&gt;</span> </span>
<span id="cb14-5"><a href="厚生分析セクター別分解分析.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change =</span> (<span class="fu">lag</span>(総求職)<span class="sc">/</span><span class="fu">lag</span>(総求人))<span class="sc">*</span>((求人<span class="sc">/</span>総求職) <span class="sc">-</span> (<span class="fu">lag</span>(求人)<span class="sc">/</span><span class="fu">lag</span>(総求職)))</span>
<span id="cb14-6"><a href="厚生分析セクター別分解分析.html#cb14-6" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb14-7"><a href="厚生分析セクター別分解分析.html#cb14-7" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb14-8"><a href="厚生分析セクター別分解分析.html#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb14-9"><a href="厚生分析セクター別分解分析.html#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2013</span>,<span class="dv">4</span>))</span>
<span id="cb14-10"><a href="厚生分析セクター別分解分析.html#cb14-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-11"><a href="厚生分析セクター別分解分析.html#cb14-11" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="sc">|&gt;</span> </span>
<span id="cb14-12"><a href="厚生分析セクター別分解分析.html#cb14-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(符号 <span class="ot">=</span> <span class="fu">if_else</span>(change <span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&quot;増加&quot;</span>, <span class="st">&quot;減少&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb14-13"><a href="厚生分析セクター別分解分析.html#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date,</span>
<span id="cb14-14"><a href="厚生分析セクター別分解分析.html#cb14-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> change,</span>
<span id="cb14-15"><a href="厚生分析セクター別分解分析.html#cb14-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 符号)</span>
<span id="cb14-16"><a href="厚生分析セクター別分解分析.html#cb14-16" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb14-17"><a href="厚生分析セクター別分解分析.html#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-18"><a href="厚生分析セクター別分解分析.html#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb14-19"><a href="厚生分析セクター別分解分析.html#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>occupation) <span class="sc">+</span></span>
<span id="cb14-20"><a href="厚生分析セクター別分解分析.html#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuPro-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb14-21"><a href="厚生分析セクター別分解分析.html#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">0.10</span>,<span class="fl">0.06</span>)</span></code></pre></div>
<p><img src="test_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<ul>
<li><p>2020年第二四半期以降、全職種で余剰が低下している。</p></li>
<li><p>サービスの職種が、2020年間の総余剰の急落の大きな源泉となっている。</p></li>
<li><p>2021年においても依然として減少は続いている。</p>
<ul>
<li>2020年の水準を上回るのは、生産工程の職種のみ</li>
</ul></li>
</ul>
<div id="入職からの余剰の貢献" class="section level4" number="4.2.3.1">
<h4><span class="header-section-number">4.2.3.1</span> 入職からの余剰の貢献</h4>
<ul>
<li>各セクターごとに、入職からの余剰の貢献を示す</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="厚生分析セクター別分解分析.html#cb15-1" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="ot">&lt;-</span></span>
<span id="cb15-2"><a href="厚生分析セクター別分解分析.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb15-3"><a href="厚生分析セクター別分解分析.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">!=</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb15-4"><a href="厚生分析セクター別分解分析.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(occupation, quaterly) <span class="sc">|&gt;</span> </span>
<span id="cb15-5"><a href="厚生分析セクター別分解分析.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change =</span> (<span class="fu">lag</span>(総求職)<span class="sc">/</span><span class="fu">lag</span>(総求人))<span class="sc">*</span>(新規就職<span class="sc">/</span>総求職)<span class="sc">*</span>((求人<span class="sc">/</span>新規就職) <span class="sc">-</span> (<span class="fu">lag</span>(求人)<span class="sc">/</span><span class="fu">lag</span>(新規就職)))</span>
<span id="cb15-6"><a href="厚生分析セクター別分解分析.html#cb15-6" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb15-7"><a href="厚生分析セクター別分解分析.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb15-8"><a href="厚生分析セクター別分解分析.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2013</span>,<span class="dv">4</span>))</span>
<span id="cb15-9"><a href="厚生分析セクター別分解分析.html#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="厚生分析セクター別分解分析.html#cb15-10" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="sc">|&gt;</span> </span>
<span id="cb15-11"><a href="厚生分析セクター別分解分析.html#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(符号 <span class="ot">=</span> <span class="fu">if_else</span>(change<span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&quot;増加&quot;</span>, <span class="st">&quot;減少&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb15-12"><a href="厚生分析セクター別分解分析.html#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date,</span>
<span id="cb15-13"><a href="厚生分析セクター別分解分析.html#cb15-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> change,</span>
<span id="cb15-14"><a href="厚生分析セクター別分解分析.html#cb15-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 符号)</span>
<span id="cb15-15"><a href="厚生分析セクター別分解分析.html#cb15-15" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb15-16"><a href="厚生分析セクター別分解分析.html#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-17"><a href="厚生分析セクター別分解分析.html#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb15-18"><a href="厚生分析セクター別分解分析.html#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>occupation) <span class="sc">+</span></span>
<span id="cb15-19"><a href="厚生分析セクター別分解分析.html#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuPro-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb15-20"><a href="厚生分析セクター別分解分析.html#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">0.10</span>,<span class="fl">0.06</span>)</span></code></pre></div>
<p><img src="test_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<ul>
<li>サービスの職種において急落がみられ、かつ下落傾向が拡大している。</li>
</ul>
</div>
<div id="入職率の貢献" class="section level4" number="4.2.3.2">
<h4><span class="header-section-number">4.2.3.2</span> 入職率の貢献</h4>
<ul>
<li>各セクター別に、入職率の貢献を示す。</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="厚生分析セクター別分解分析.html#cb16-1" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="ot">&lt;-</span></span>
<span id="cb16-2"><a href="厚生分析セクター別分解分析.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb16-3"><a href="厚生分析セクター別分解分析.html#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">!=</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-4"><a href="厚生分析セクター別分解分析.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(occupation, quaterly) <span class="sc">|&gt;</span> </span>
<span id="cb16-5"><a href="厚生分析セクター別分解分析.html#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change =</span> (<span class="fu">lag</span>(総求職)<span class="sc">/</span><span class="fu">lag</span>(総求人))<span class="sc">*</span>(<span class="fu">lag</span>(求人)<span class="sc">/</span><span class="fu">lag</span>(新規就職))<span class="sc">*</span>((新規就職<span class="sc">/</span>総求職) <span class="sc">-</span> (<span class="fu">lag</span>(新規就職)<span class="sc">/</span><span class="fu">lag</span>(総求職)))</span>
<span id="cb16-6"><a href="厚生分析セクター別分解分析.html#cb16-6" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb16-7"><a href="厚生分析セクター別分解分析.html#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb16-8"><a href="厚生分析セクター別分解分析.html#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2013</span>,<span class="dv">4</span>))</span>
<span id="cb16-9"><a href="厚生分析セクター別分解分析.html#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="厚生分析セクター別分解分析.html#cb16-10" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="sc">|&gt;</span> </span>
<span id="cb16-11"><a href="厚生分析セクター別分解分析.html#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(符号 <span class="ot">=</span> <span class="fu">if_else</span>(change<span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&quot;増加&quot;</span>, <span class="st">&quot;減少&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb16-12"><a href="厚生分析セクター別分解分析.html#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date,</span>
<span id="cb16-13"><a href="厚生分析セクター別分解分析.html#cb16-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> change,</span>
<span id="cb16-14"><a href="厚生分析セクター別分解分析.html#cb16-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 符号)</span>
<span id="cb16-15"><a href="厚生分析セクター別分解分析.html#cb16-15" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb16-16"><a href="厚生分析セクター別分解分析.html#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-17"><a href="厚生分析セクター別分解分析.html#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb16-18"><a href="厚生分析セクター別分解分析.html#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>occupation) <span class="sc">+</span></span>
<span id="cb16-19"><a href="厚生分析セクター別分解分析.html#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuPro-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb16-20"><a href="厚生分析セクター別分解分析.html#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">0.10</span>,<span class="fl">0.06</span>)</span></code></pre></div>
<p><img src="test_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<ul>
<li><p>２０２０年間には、サービスの職種が最も下落している。</p></li>
<li><p>2021年第二四半期には、全職種において下げ止まりが見られる。</p></li>
</ul>
</div>
</div>
</div>
<div id="職業中分類" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> 職業中分類</h2>
<ul>
<li><p>セクター<span class="math inline">\(=\)</span>職業中分類</p></li>
<li><p>中分類別に就職、求人件数を集計し、厚生指標を示す。</p></li>
</ul>
<div id="rコード-4" class="section level3" number="4.3.1">
<h3><span class="header-section-number">4.3.1</span> Rコード</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="厚生分析セクター別分解分析.html#cb17-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb17-2"><a href="厚生分析セクター別分解分析.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(raw.hir,</span>
<span id="cb17-3"><a href="厚生分析セクター別分解分析.html#cb17-3" aria-hidden="true" tabindex="-1"></a>        raw.vacancy,</span>
<span id="cb17-4"><a href="厚生分析セクター別分解分析.html#cb17-4" aria-hidden="true" tabindex="-1"></a>        raw.seeker) <span class="sc">|&gt;</span> </span>
<span id="cb17-5"><a href="厚生分析セクター別分解分析.html#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">!=</span> <span class="st">&quot;職業計&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-6"><a href="厚生分析セクター別分解分析.html#cb17-6" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;管理的職業&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-7"><a href="厚生分析セクター別分解分析.html#cb17-7" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;専門的・技術的職業&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-8"><a href="厚生分析セクター別分解分析.html#cb17-8" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;事務的職業&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-9"><a href="厚生分析セクター別分解分析.html#cb17-9" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;販売の職業&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-10"><a href="厚生分析セクター別分解分析.html#cb17-10" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;サービスの職業&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-11"><a href="厚生分析セクター別分解分析.html#cb17-11" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;輸送・機械運転の職業&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-12"><a href="厚生分析セクター別分解分析.html#cb17-12" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;生産工程の職業&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-13"><a href="厚生分析セクター別分解分析.html#cb17-13" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;建設・採掘の職業&quot;</span> <span class="sc">&amp;</span></span>
<span id="cb17-14"><a href="厚生分析セクター別分解分析.html#cb17-14" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;運搬・清掃・包装等の職業&quot;</span><span class="sc">&amp;</span></span>
<span id="cb17-15"><a href="厚生分析セクター別分解分析.html#cb17-15" aria-hidden="true" tabindex="-1"></a>           occupation <span class="sc">!=</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-16"><a href="厚生分析セクター別分解分析.html#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">quaterly =</span> month <span class="sc">|&gt;</span> <span class="fu">cut</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>,<span class="dv">12</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)),</span>
<span id="cb17-17"><a href="厚生分析セクター別分解分析.html#cb17-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">date =</span> <span class="fu">str_c</span>(year,quaterly,<span class="at">sep =</span> <span class="st">&quot;:Q&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">yq</span>(),</span>
<span id="cb17-18"><a href="厚生分析セクター別分解分析.html#cb17-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">n =</span> <span class="fu">as.numeric</span>(n)</span>
<span id="cb17-19"><a href="厚生分析セクター別分解分析.html#cb17-19" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb17-20"><a href="厚生分析セクター別分解分析.html#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date,type,occupation) <span class="sc">|&gt;</span> </span>
<span id="cb17-21"><a href="厚生分析セクター別分解分析.html#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n =</span> n <span class="sc">|&gt;</span> <span class="fu">sum</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb17-22"><a href="厚生分析セクター別分解分析.html#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb17-23"><a href="厚生分析セクター別分解分析.html#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(year,quaterly,date,type,n,occupation) <span class="sc">|&gt;</span> </span>
<span id="cb17-24"><a href="厚生分析セクター別分解分析.html#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type,</span>
<span id="cb17-25"><a href="厚生分析セクター別分解分析.html#cb17-25" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n) <span class="sc">|&gt;</span> </span>
<span id="cb17-26"><a href="厚生分析セクター別分解分析.html#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">|&gt;</span> </span>
<span id="cb17-27"><a href="厚生分析セクター別分解分析.html#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(総求職 <span class="ot">=</span> <span class="fu">sum</span>(求職),</span>
<span id="cb17-28"><a href="厚生分析セクター別分解分析.html#cb17-28" aria-hidden="true" tabindex="-1"></a>            総求人 <span class="ot">=</span> <span class="fu">sum</span>(求人),</span>
<span id="cb17-29"><a href="厚生分析セクター別分解分析.html#cb17-29" aria-hidden="true" tabindex="-1"></a>            総新規就職 <span class="ot">=</span> <span class="fu">sum</span>(新規就職)) <span class="sc">|&gt;</span> </span>
<span id="cb17-30"><a href="厚生分析セクター別分解分析.html#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb17-31"><a href="厚生分析セクター別分解分析.html#cb17-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-32"><a href="厚生分析セクター別分解分析.html#cb17-32" aria-hidden="true" tabindex="-1"></a>df.agre <span class="ot">&lt;-</span></span>
<span id="cb17-33"><a href="厚生分析セクター別分解分析.html#cb17-33" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb17-34"><a href="厚生分析セクター別分解分析.html#cb17-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(occupation) <span class="sc">|&gt;</span> </span>
<span id="cb17-35"><a href="厚生分析セクター別分解分析.html#cb17-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">share =</span> <span class="fu">sum</span>(求人)) <span class="sc">|&gt;</span> </span>
<span id="cb17-36"><a href="厚生分析セクター別分解分析.html#cb17-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb17-37"><a href="厚生分析セクター別分解分析.html#cb17-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(occupation,</span>
<span id="cb17-38"><a href="厚生分析セクター別分解分析.html#cb17-38" aria-hidden="true" tabindex="-1"></a>           share) <span class="sc">|&gt;</span> </span>
<span id="cb17-39"><a href="厚生分析セクター別分解分析.html#cb17-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">group =</span> <span class="fu">if_else</span>(share <span class="sc">&lt;=</span> <span class="fu">nth</span>(share, <span class="dv">49</span>),<span class="st">&quot;その他&quot;</span>,occupation))</span>
<span id="cb17-40"><a href="厚生分析セクター別分解分析.html#cb17-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-41"><a href="厚生分析セクター別分解分析.html#cb17-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-42"><a href="厚生分析セクター別分解分析.html#cb17-42" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span></span>
<span id="cb17-43"><a href="厚生分析セクター別分解分析.html#cb17-43" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb17-44"><a href="厚生分析セクター別分解分析.html#cb17-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(df.agre,</span>
<span id="cb17-45"><a href="厚生分析セクター別分解分析.html#cb17-45" aria-hidden="true" tabindex="-1"></a>            <span class="at">by =</span> <span class="st">&quot;occupation&quot;</span>)</span></code></pre></div>
</div>
<div id="セクターの貢献率-2" class="section level3" number="4.3.2">
<h3><span class="header-section-number">4.3.2</span> セクターの貢献率</h3>
<ul>
<li>余剰全体に占める各セクターの割合を示す。</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="厚生分析セクター別分解分析.html#cb18-1" aria-hidden="true" tabindex="-1"></a>df.select <span class="ot">&lt;-</span></span>
<span id="cb18-2"><a href="厚生分析セクター別分解分析.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb18-3"><a href="厚生分析セクター別分解分析.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2012</span>,<span class="dv">4</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb18-4"><a href="厚生分析セクター別分解分析.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">!=</span> <span class="st">&quot;その他&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-5"><a href="厚生分析セクター別分解分析.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(余剰の割合 <span class="ot">=</span> 求人<span class="sc">/</span>総求人) </span>
<span id="cb18-6"><a href="厚生分析セクター別分解分析.html#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="厚生分析セクター別分解分析.html#cb18-7" aria-hidden="true" tabindex="-1"></a>df.other <span class="ot">&lt;-</span></span>
<span id="cb18-8"><a href="厚生分析セクター別分解分析.html#cb18-8" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb18-9"><a href="厚生分析セクター別分解分析.html#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2012</span>,<span class="dv">4</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb18-10"><a href="厚生分析セクター別分解分析.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">==</span> <span class="st">&quot;その他&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb18-11"><a href="厚生分析セクター別分解分析.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(余剰の割合 <span class="ot">=</span> 求人<span class="sc">/</span>総求人) </span>
<span id="cb18-12"><a href="厚生分析セクター別分解分析.html#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="厚生分析セクター別分解分析.html#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb18-14"><a href="厚生分析セクター別分解分析.html#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> 余剰の割合, </span>
<span id="cb18-15"><a href="厚生分析セクター別分解分析.html#cb18-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> date, </span>
<span id="cb18-16"><a href="厚生分析セクター別分解分析.html#cb18-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">group =</span> occupation), </span>
<span id="cb18-17"><a href="厚生分析セクター別分解分析.html#cb18-17" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> df.other, </span>
<span id="cb18-18"><a href="厚生分析セクター別分解分析.html#cb18-18" aria-hidden="true" tabindex="-1"></a>            <span class="at">colour =</span> <span class="fu">alpha</span>(<span class="st">&quot;grey&quot;</span>, <span class="fl">0.7</span>)</span>
<span id="cb18-19"><a href="厚生分析セクター別分解分析.html#cb18-19" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb18-20"><a href="厚生分析セクター別分解分析.html#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> 余剰の割合, </span>
<span id="cb18-21"><a href="厚生分析セクター別分解分析.html#cb18-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> date, </span>
<span id="cb18-22"><a href="厚生分析セクター別分解分析.html#cb18-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> occupation), </span>
<span id="cb18-23"><a href="厚生分析セクター別分解分析.html#cb18-23" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> df.select</span>
<span id="cb18-24"><a href="厚生分析セクター別分解分析.html#cb18-24" aria-hidden="true" tabindex="-1"></a>            ) <span class="sc">+</span></span>
<span id="cb18-25"><a href="厚生分析セクター別分解分析.html#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> 余剰の割合, </span>
<span id="cb18-26"><a href="厚生分析セクター別分解分析.html#cb18-26" aria-hidden="true" tabindex="-1"></a>                <span class="at">x =</span> date, </span>
<span id="cb18-27"><a href="厚生分析セクター別分解分析.html#cb18-27" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> occupation), </span>
<span id="cb18-28"><a href="厚生分析セクター別分解分析.html#cb18-28" aria-hidden="true" tabindex="-1"></a>            <span class="at">data =</span> df.select) <span class="sc">+</span></span>
<span id="cb18-29"><a href="厚生分析セクター別分解分析.html#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-30"><a href="厚生分析セクター別分解分析.html#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuPro-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb18-31"><a href="厚生分析セクター別分解分析.html#cb18-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.title =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="test_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<ul>
<li><p>介護サービスの職業が全体の10%近くの余剰を生み出している。</p>
<ul>
<li>COVID-19下で割合はさらに増加し、11%近くになっている。</li>
</ul></li>
<li><p>商品販売の職業も余剰の大きな割合を生み出しているが、長期低下傾向にあり、COVID-19後急落している</p></li>
<li><p>接客・給仕の職業、飲食調理の職業についても、急落が認められる</p></li>
<li><p>保険師、助産師、看護士については、COVID-19下で増加している</p></li>
</ul>
</div>
<div id="総余剰の変化-1" class="section level3" number="4.3.3">
<h3><span class="header-section-number">4.3.3</span> 総余剰の変化</h3>
<ul>
<li>総余剰の前年同期変化率について、各セクターの貢献率を示す。</li>
</ul>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="厚生分析セクター別分解分析.html#cb19-1" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="ot">&lt;-</span></span>
<span id="cb19-2"><a href="厚生分析セクター別分解分析.html#cb19-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="厚生分析セクター別分解分析.html#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">!=</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb19-4"><a href="厚生分析セクター別分解分析.html#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">!=</span> <span class="st">&quot;その他&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb19-5"><a href="厚生分析セクター別分解分析.html#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group, quaterly) <span class="sc">|&gt;</span> </span>
<span id="cb19-6"><a href="厚生分析セクター別分解分析.html#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change =</span> (<span class="fu">lag</span>(総求職)<span class="sc">/</span><span class="fu">lag</span>(総求人))<span class="sc">*</span>((求人<span class="sc">/</span>総求職) <span class="sc">-</span> (<span class="fu">lag</span>(求人)<span class="sc">/</span><span class="fu">lag</span>(総求職)))</span>
<span id="cb19-7"><a href="厚生分析セクター別分解分析.html#cb19-7" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb19-8"><a href="厚生分析セクター別分解分析.html#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb19-9"><a href="厚生分析セクター別分解分析.html#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2013</span>,<span class="dv">4</span>))</span>
<span id="cb19-10"><a href="厚生分析セクター別分解分析.html#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="厚生分析セクター別分解分析.html#cb19-11" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="sc">|&gt;</span> </span>
<span id="cb19-12"><a href="厚生分析セクター別分解分析.html#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(符号 <span class="ot">=</span> <span class="fu">if_else</span>(change<span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&quot;増加&quot;</span>, <span class="st">&quot;減少&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb19-13"><a href="厚生分析セクター別分解分析.html#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date,</span>
<span id="cb19-14"><a href="厚生分析セクター別分解分析.html#cb19-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> change,</span>
<span id="cb19-15"><a href="厚生分析セクター別分解分析.html#cb19-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 符号)</span>
<span id="cb19-16"><a href="厚生分析セクター別分解分析.html#cb19-16" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb19-17"><a href="厚生分析セクター別分解分析.html#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-18"><a href="厚生分析セクター別分解分析.html#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb19-19"><a href="厚生分析セクター別分解分析.html#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>group,</span>
<span id="cb19-20"><a href="厚生分析セクター別分解分析.html#cb19-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb19-21"><a href="厚生分析セクター別分解分析.html#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuPro-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb19-22"><a href="厚生分析セクター別分解分析.html#cb19-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">0.04</span>,<span class="fl">0.03</span>)</span></code></pre></div>
<p><img src="test_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<ul>
<li><p>2013年以降、余剰の増加傾向が続いていた。</p>
<ul>
<li><p>特に介護サービスの職業で顕著</p></li>
<li><p>近年は頭打ち傾向がみられていた</p></li>
</ul></li>
<li><p>COVID-19下において、全職種において余剰が急落した。</p>
<ul>
<li><p>相対的に保健師、助産師、介護サービスへの影響は小さい</p></li>
<li><p>相対的に商品販売、接客・給仕、飲食物調理への影響が大きい</p></li>
</ul></li>
<li><p>全職種で2021年になっても減少は続いている</p></li>
</ul>
<div id="入職からの余剰の貢献-1" class="section level4" number="4.3.3.1">
<h4><span class="header-section-number">4.3.3.1</span> 入職からの余剰の貢献</h4>
<ul>
<li>各セクターごとに、入職からの余剰の貢献を示す</li>
</ul>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="厚生分析セクター別分解分析.html#cb20-1" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="ot">&lt;-</span></span>
<span id="cb20-2"><a href="厚生分析セクター別分解分析.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="厚生分析セクター別分解分析.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">!=</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-4"><a href="厚生分析セクター別分解分析.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">!=</span> <span class="st">&quot;その他&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb20-5"><a href="厚生分析セクター別分解分析.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group, quaterly) <span class="sc">|&gt;</span> </span>
<span id="cb20-6"><a href="厚生分析セクター別分解分析.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change =</span> (<span class="fu">lag</span>(総求職)<span class="sc">/</span><span class="fu">lag</span>(総求人))<span class="sc">*</span>(新規就職<span class="sc">/</span>総求職)<span class="sc">*</span>((求人<span class="sc">/</span>新規就職) <span class="sc">-</span> (<span class="fu">lag</span>(求人)<span class="sc">/</span><span class="fu">lag</span>(新規就職)))</span>
<span id="cb20-7"><a href="厚生分析セクター別分解分析.html#cb20-7" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb20-8"><a href="厚生分析セクター別分解分析.html#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-9"><a href="厚生分析セクター別分解分析.html#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2013</span>,<span class="dv">4</span>))</span>
<span id="cb20-10"><a href="厚生分析セクター別分解分析.html#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="厚生分析セクター別分解分析.html#cb20-11" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="sc">|&gt;</span> </span>
<span id="cb20-12"><a href="厚生分析セクター別分解分析.html#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(符号 <span class="ot">=</span> <span class="fu">if_else</span>(change<span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&quot;増加&quot;</span>, <span class="st">&quot;減少&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb20-13"><a href="厚生分析セクター別分解分析.html#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date,</span>
<span id="cb20-14"><a href="厚生分析セクター別分解分析.html#cb20-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> change,</span>
<span id="cb20-15"><a href="厚生分析セクター別分解分析.html#cb20-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 符号)</span>
<span id="cb20-16"><a href="厚生分析セクター別分解分析.html#cb20-16" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb20-17"><a href="厚生分析セクター別分解分析.html#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-18"><a href="厚生分析セクター別分解分析.html#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb20-19"><a href="厚生分析セクター別分解分析.html#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>group,</span>
<span id="cb20-20"><a href="厚生分析セクター別分解分析.html#cb20-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb20-21"><a href="厚生分析セクター別分解分析.html#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuPro-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-22"><a href="厚生分析セクター別分解分析.html#cb20-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">0.04</span>,<span class="fl">0.03</span>)</span></code></pre></div>
<p><img src="test_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<ul>
<li><p>特に商品販売、接客・給仕、飲食物調理において減少が大きい</p>
<ul>
<li>下げ止まりの傾向も明確ではない</li>
</ul></li>
</ul>
</div>
<div id="入職率の貢献-1" class="section level4" number="4.3.3.2">
<h4><span class="header-section-number">4.3.3.2</span> 入職率の貢献</h4>
<ul>
<li>各セクター別に、入職率の貢献を示す。</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="厚生分析セクター別分解分析.html#cb21-1" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="ot">&lt;-</span></span>
<span id="cb21-2"><a href="厚生分析セクター別分解分析.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  df <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="厚生分析セクター別分解分析.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(occupation <span class="sc">!=</span> <span class="st">&quot;分類不能の職業&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-4"><a href="厚生分析セクター別分解分析.html#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(group <span class="sc">!=</span> <span class="st">&quot;その他&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-5"><a href="厚生分析セクター別分解分析.html#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(group, quaterly) <span class="sc">|&gt;</span> </span>
<span id="cb21-6"><a href="厚生分析セクター別分解分析.html#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">change =</span> (<span class="fu">lag</span>(総求職)<span class="sc">/</span><span class="fu">lag</span>(総求人))<span class="sc">*</span>(<span class="fu">lag</span>(求人)<span class="sc">/</span><span class="fu">lag</span>(新規就職))<span class="sc">*</span>((新規就職<span class="sc">/</span>総求職) <span class="sc">-</span> (<span class="fu">lag</span>(新規就職)<span class="sc">/</span><span class="fu">lag</span>(総求職)))</span>
<span id="cb21-7"><a href="厚生分析セクター別分解分析.html#cb21-7" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb21-8"><a href="厚生分析セクター別分解分析.html#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-9"><a href="厚生分析セクター別分解分析.html#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(date <span class="sc">&gt;=</span> <span class="fu">make_date</span>(<span class="dv">2013</span>,<span class="dv">4</span>))</span>
<span id="cb21-10"><a href="厚生分析セクター別分解分析.html#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="厚生分析セクター別分解分析.html#cb21-11" aria-hidden="true" tabindex="-1"></a>df<span class="fl">.1</span> <span class="sc">|&gt;</span> </span>
<span id="cb21-12"><a href="厚生分析セクター別分解分析.html#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(符号 <span class="ot">=</span> <span class="fu">if_else</span>(change<span class="sc">&gt;=</span> <span class="dv">0</span>, <span class="st">&quot;増加&quot;</span>, <span class="st">&quot;減少&quot;</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb21-13"><a href="厚生分析セクター別分解分析.html#cb21-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date,</span>
<span id="cb21-14"><a href="厚生分析セクター別分解分析.html#cb21-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> change,</span>
<span id="cb21-15"><a href="厚生分析セクター別分解分析.html#cb21-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 符号)</span>
<span id="cb21-16"><a href="厚生分析セクター別分解分析.html#cb21-16" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb21-17"><a href="厚生分析セクター別分解分析.html#cb21-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb21-18"><a href="厚生分析セクター別分解分析.html#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span><span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb21-19"><a href="厚生分析セクター別分解分析.html#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>group,</span>
<span id="cb21-20"><a href="厚生分析セクター別分解分析.html#cb21-20" aria-hidden="true" tabindex="-1"></a>             <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb21-21"><a href="厚生分析セクター別分解分析.html#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>(<span class="at">base_family =</span> <span class="st">&quot;HiraKakuPro-W3&quot;</span>) <span class="sc">+</span></span>
<span id="cb21-22"><a href="厚生分析セクター別分解分析.html#cb21-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="fl">0.04</span>,<span class="fl">0.03</span>)</span></code></pre></div>
<p><img src="test_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<ul>
<li><p>COVID-19下で入職率も急落した。</p>
<ul>
<li><p>入職からの余剰と比べて、底打ち傾向が顕著</p></li>
<li><p>特に接客・給仕の職業、保健師、助産師、看護師の職業においては2021年第二四半期に底打ちしている</p></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="環境-2" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> 環境</h2>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="厚生分析セクター別分解分析.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div>
<pre><code>## R version 4.1.1 (2021-08-10)
## Platform: aarch64-apple-darwin20 (64-bit)
## Running under: macOS Big Sur 11.6
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRblas.0.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.1-arm64/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] Rfast_2.0.3        RcppZiggurat_0.1.6 Rcpp_1.0.7         yardstick_0.0.8   
##  [5] workflowsets_0.1.0 workflows_0.2.3    tune_0.1.6         rsample_0.1.0     
##  [9] recipes_0.1.16     parsnip_0.1.7      modeldata_0.1.1    infer_1.0.0       
## [13] dials_0.0.9        scales_1.1.1       broom_0.7.9        tidymodels_0.1.3  
## [17] lubridate_1.7.10   readxl_1.3.1       forcats_0.5.1      stringr_1.4.0     
## [21] dplyr_1.0.7        purrr_0.3.4        readr_2.0.1        tidyr_1.1.3       
## [25] tibble_3.1.3       ggplot2_3.3.5      tidyverse_1.3.1   
## 
## loaded via a namespace (and not attached):
##  [1] colorspace_2.0-2   ellipsis_0.3.2     class_7.3-19       fs_1.5.0          
##  [5] rstudioapi_0.13    listenv_0.8.0      furrr_0.2.3        farver_2.1.0      
##  [9] prodlim_2019.11.13 fansi_0.5.0        xml2_1.3.2         codetools_0.2-18  
## [13] splines_4.1.1      knitr_1.33         jsonlite_1.7.2     pROC_1.17.0.1     
## [17] dbplyr_2.1.1       compiler_4.1.1     httr_1.4.2         backports_1.2.1   
## [21] assertthat_0.2.1   Matrix_1.3-4       fastmap_1.1.0      cli_3.0.1         
## [25] htmltools_0.5.2    tools_4.1.1        gtable_0.3.0       glue_1.4.2        
## [29] cellranger_1.1.0   jquerylib_0.1.4    DiceDesign_1.9     vctrs_0.3.8       
## [33] iterators_1.0.13   timeDate_3043.102  gower_0.2.2        xfun_0.25         
## [37] globals_0.14.0     rvest_1.0.1        lifecycle_1.0.0    pacman_0.5.1      
## [41] future_1.21.0      MASS_7.3-54        ipred_0.9-11       hms_1.1.0         
## [45] parallel_4.1.1     yaml_2.2.1         sass_0.4.0         rpart_4.1-15      
## [49] stringi_1.7.3      highr_0.9          foreach_1.5.1      lhs_1.1.1         
## [53] hardhat_0.1.6      lava_1.6.9         rlang_0.4.11       pkgconfig_2.0.3   
## [57] evaluate_0.14      lattice_0.20-44    labeling_0.4.2     tidyselect_1.1.1  
## [61] parallelly_1.27.0  plyr_1.8.6         magrittr_2.0.1     bookdown_0.23     
## [65] R6_2.5.1           generics_0.1.0     DBI_1.1.1          pillar_1.6.2      
## [69] haven_2.4.3        withr_2.4.2        survival_3.2-12    nnet_7.3-16       
## [73] modelr_0.1.8       crayon_1.4.1       utf8_1.2.2         tzdb_0.1.2        
## [77] rmarkdown_2.10     grid_4.1.1         reprex_2.0.1       digest_0.6.27     
## [81] munsell_0.5.0      GPfit_1.0-8        bslib_0.3.0</code></pre>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-kawata2021first" class="csl-entry">
Kawata, Keisuke, and Yasuhiro Sato. 2021. <span>“A First Aid Kit to Assess Welfare Impacts.”</span> <em>Economics Letters</em>, 109928.
</div>
<div id="ref-rogerson2005search" class="csl-entry">
Rogerson, Richard, Robert Shimer, and Randall Wright. 2005. <span>“Search-Theoretic Models of the Labor Market: A Survey.”</span> <em>Journal of Economic Literature</em> 43 (4): 959–88.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="厚生分析時系列比較.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["test.epub"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
